<!DOCTYPE html>
<html lang="en">
  <head>

    <title>Использование git для управление vim плагинами | Gonzih's Blog</title>

    <meta charset="utf-8">

    <meta property="og:site_name" content="Gonzih's Blog"/>
    <meta property="og:title" content="Использование git для управление vim плагинами"/>
    <meta property="og:description" content="git submodule && vim pathogen"/>
    

    <link rel="Shortcut Icon" type="image/ico" href="/images/favicon.png">
    <link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen">
    <link rel="stylesheet" href="/css/base.css" type="text/css" media="screen">
    <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen">
    <link rel="stylesheet" href="/css/syntax.css" type="text/css" media="screen">
    <link rel="stylesheet" href="/css/queries/netbooks-tablets.css" type="text/css" media="screen and (max-width: 1007px)" />

    <script type="text/javascript" src="/js/html5.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

    <!--[if IE 7]><link rel="stylesheet" href="css/ie/ie7.css" type="text/css" media="screen"><![endif]-->
    <!--[if lt IE 7]><link rel="stylesheet" href="css/ie/ie6.css" type="text/css" media="screen"><![endif]-->

    <link href="/atom.xml" rel="alternate" title="Gonzih's Blog" type="application/atom+xml" />

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-22494353-1']);
      _gaq.push(['_trackPageview']);

      (function() {
       var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    

  </head>
  <body>
    <div id="page">
      <header>
        <div class="inside">
          <a href="/" class="header-link">
          <div class="left">
          <!--
            <img width="40px" src="https://secure.gravatar.com/avatar/d0fce0d0c982f0ed2301ce51f7715153" >
          -->
            <h1>Gonzih's Blog</h1>
            <div class="description">Ruby/Rails/Linux</div>
          </div>
          </a>
          <div class="right">
            <nav>
              <a href="/">Home</a>
            </nav>
          </div>
        </div>
      </header>
      <article>
  <section>
    <div class="inside">

      <h2>Использование git для управление vim плагинами</h2>

      <div class="post-image"><img src="/images/blog/git-submodule-and-vim-pathogen/main.png" /></div>

      <div class="text"><p>
Пост о том как держать свои плагины в актуальной версии, обновлять их с комфортом и все это с чудесными git && github.
<br />
<br />
Нам понадобятся:
  <ul>
    <li>
      vim с установленым плагином <a href="https://github.com/tpope/vim-pathogen">pathogen</a>
    </li>
    <li>
      git
    </li>
    <li>
      github или другой git хостинг аккаунт
    </li>
    <li>
      руки 2 шт
    </li>
    <li>
      голова > 1 шт
    </li>
  </ul>
<br />
Приступим.
<br />
<br />
Что такое pathogen? Pathogen позволяет устанавливать плагины в bundle/ директорию.
<br />В vimrc добавляем
<div class="highlight"><pre><code class="vim">  <span class="k">call</span> pathogen#runtime_append_all_bundles<span class="p">()</span>
</code></pre>
</div>
<br />
Всё, pathogen готов к использованию. Теперь при запуске vim/gvim pathogen будет рекурсивно подгружать содержимое bundle как плагины.
<br />
<br />
Каджый плагин будем устанавливать в виде <a href="https://git.wiki.kernel.org/index.php/GitSubmoduleTutorial" />git submodule</a>. Субмодули в гит по сути хранят в себе адрес репозитория и хэш коммита HEAD.
После выпонения git submodule init исходные коды всех субмодулей будут инициализированы и вытянуты из репозиториев.
git submodule update - обновляет вершину субрепозитория.
<br />
<br />
Добавление нового плагина
<div class="highlight"><pre><code class="sh">  git submodule add https://github.com/foo.git bundle/foo
  git add .
  git ci -m <span class="s1">&#39;added new plugin&#39;</span>
  git push
  git submodule init
</code></pre>
</div>
<br />
Для обновления плагинов я использую следующий скрипт
<div class="highlight"><pre><code class="sh">  <span class="c">#!/bin/bash</span>
  git pull
  git submodule init
  git submodule update
  git submodule foreach git pull origin master
  git submodule foreach git checkout master
  git ci -a -m <span class="s1">&#39;Update submodules to latest versions&#39;</span>
  git push
</code></pre>
</div>
<br />
С удалением плагинов дела обстоят труднее.
<br />
Сначала следует удалить всю информацию о субмодуле из .gitmodules && .git/config
<div class="highlight"><pre><code class="sh">  <span class="c"># а затем удалить директорию с плагином из git</span>
  git rm --cached bundle/foo <span class="c">#обязательно без закрывающего слеша</span>
  git ci -a -m <span class="s1">&#39;remove foo&#39;</span>
  rm bundle/foo
</code></pre>
</div>
<br />
Вот и все! Теперь пушим все это дело на github и радуемся!
<br />
<br />
З.Ы. .vimrc и .gvimrc лучше хранить следующим образом
<div class="highlight"><pre><code class="sh">  <span class="nb">cd</span> ~
  mv .gvimrc .vim/gvimrc
  mv .vimrc .vim/vimrc
  ln -s ~/.vim/vimrc ~/.vimrc
  ln -s ~/.vim/gvimrc ~/.gvimrc
  <span class="nb">cd</span> ~/.vim
  git add .
  git ci -m <span class="s1">&#39;vim dotfiles added&#39;</span>
</code></pre>
</div>
</div>

      

        <div id="disqus_thread">
        <script type="text/javascript">

           var disqus_shortname = 'gonzihsblog'; // required: replace example with your forum shortname

           // The following are highly recommended additional parameters. Remove the slashes in front to use.
           var disqus_identifier = '/use-git-for-manage-your-vim-extensions';
           var disqus_url = 'http://gonzih.github.com/use-git-for-manage-your-vim-extensions/index.html';

           (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
           })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>

      

    </div>
  </section>
</article>

<aside>
  
    <div class="inside">
      <h3>Similar Posts</h3>
        
          
            <div class="related-post">
              <h4 class="title"><a href="/first-post">Первый пост</a></h4>
              <div class="meta">
                <span class="timeago">15 hours ago</span>
                 <a href="/tags/blog/" class="tag-link">#blog</a>  <a href="/tags/github/" class="tag-link">#github</a>  <a href="/tags/github-pages/" class="tag-link">#github pages</a>  <a href="/tags/jekyll/" class="tag-link">#jekyll</a> 
              </div>
            </div>
          
        
    </div>
  

  <div class="inside">
  <h3>Tag Cloud</h3>
  <div class="text tag-cloud"><a href="/tags/blog/" title="Pages tagged blog" style="font-size: 100%" rel=\"tag\">blog</a> <a href="/tags/git/" title="Pages tagged git" style="font-size: 100%" rel=\"tag\">git</a> <a href="/tags/github/" title="Pages tagged github" style="font-size: 200%" rel=\"tag\">github</a> <a href="/tags/github-pages/" title="Pages tagged github pages" style="font-size: 100%" rel=\"tag\">github pages</a> <a href="/tags/jekyll/" title="Pages tagged jekyll" style="font-size: 100%" rel=\"tag\">jekyll</a> <a href="/tags/pathogen/" title="Pages tagged pathogen" style="font-size: 100%" rel=\"tag\">pathogen</a> <a href="/tags/submodule/" title="Pages tagged submodule" style="font-size: 100%" rel=\"tag\">submodule</a> <a href="/tags/vim/" title="Pages tagged vim" style="font-size: 100%" rel=\"tag\">vim</a> </div>
</div>

</aside>

      <footer>
        <div class="inside">
          © 2011 Gonzih's Blog <a class='mail' href="mailto:iam@gonzih.org">iam@gonzih.org</a>
        </div>
      </footer>
    </div>
    <script type="text/javascript" src="/js/custom.js"></script>
  </body>
</html>
